 // SPDX-License-Identifier: MIT
 pragma solidity ^0.8.10;
 interface IERC20 {
     //å¼•ç”¨XENä¸­æ¥å£ï¼Œä½¿ç”¨balanceOfå’Œtransferä¸­çš„ä¸¤ä¸ªå‡½æ•°
     function balanceOf(address owner) external view returns(uint);
     function transfer(address to, uint value) external returns(bool);
 }
 interface IProject {
     //å¼•ç”¨XENä¸­çš„æ¥å£ï¼Œä½¿ç”¨claimRankå’ŒclaimMintRewardä¸¤ä¸ªå‡½æ•°
     function claimRank(uint256 term) external;
     function claimMintReward() external ;
 }
 
 interface IMint {
     //å¼•ç”¨æ¥å£ä½¿ç”¨claimå‡½æ•°æ¥å£
     function claim() external;
 }
 contract Mint {
     //Mintåˆçº¦ï¼Œä¿å­˜ç€æˆ‘ä»¬çš„åœ°å€å’ŒXENåˆçº¦çš„åœ°å€ï¼Œä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œä¼ å…¥_termå‚æ•°ï¼Œåœ¨ä¼ å…¥_termï¼Œé€‰æ‹©æˆ‘ä»¬è¦æŒ–å‡ å¤©çš„XEN
   address owner = 0xad1d07CeF4FD0335569376e933818E6447A39f03;
   address _contract = 0x06450dEe7FD2Fb8E39061434BAbCFC05599a6Fb8;
   constructor(uint _term) public {
       IProject(_contract).claimRank(_term);
   } 

   function claim() external {
       //å¼•ç”¨XENä¸­çš„é¢†å¸çš„å‡½æ•°ï¼Œå°†æˆ‘ä»¬ownerä¸­çš„balanceï¼ˆä½™é¢ï¼‰å‘åˆ°æˆ‘ä»¬åœ°å€é‡Œé¢
       IProject(_contract).claimMintReward();
       uint balance = IERC20(_contract).balanceOf(address(this));
       IERC20(_contract).transfer(owner, balance);  
   }
 }

 contract factory {
   

   address[] public addrs;//è£…ç”Ÿæˆçš„åœ°å€çš„åœ°å€æ•°ç»„

   function deploy(uint _count, uint _term) public {
       //æˆ‘ä»¬è¦æŒ–çš„è´¦æˆ·æ•°é‡å’ŒæŒ–çš„å¤©æ•°ï¼Œå†æŠŠç”Ÿæˆçš„åœ°å€Pushåˆ°addrsæ•°ç»„ä¸­
   for(uint i = 0; i < _count; i++) {
       Mint addr = new Mint(_term);
       addrs.push(address(addr));
   }
   }

function batchClaimReward() public  {
    //æˆ‘ä»¬å¼•ç”¨IMintæ¥å£ä¸­çš„claimå‡½æ•°ï¼Œæ‰¹é‡çš„æŠŠå¸æå‡ºæ¥
    uint len = addrs.length;
    for(uint i = 0; i < len; i++) {
    IMint(addrs[i]).claim();
    }
}
 }
 ä½†æ˜¯ç°åœ¨gasè´¹ååˆ†çš„æ˜‚è´µï¼Œè¿˜æ˜¯å»ºè®®å¤§å®¶ä¸è¦éƒ¨ç½²ï¼Œä»¥å¤ªé“¾çœŸçš„æ˜¯è´µæ—é“¾å•Šå¤ªè´µäº†ğŸ˜‚
